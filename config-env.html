<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>第 2 章 配置环境变量</title>
<link rel="stylesheet" href="docbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="index.html" title="小企鹅输入法（fcitx）">
<link rel="up" href="installation.html" title="部分 II. 安装配置">
<link rel="prev" href="package.html" title="1.2. 从预编译包安装">
<link rel="next" href="autostart.html" title="第 3 章 跟随桌面环境自动启动">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">第 2 章 配置环境变量</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="package.html">上一页</a> </td>
<th width="60%" align="center">部分 II. 安装配置</th>
<td width="20%" align="right"> <a accesskey="n" href="autostart.html">下一页</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" title="第 2 章 配置环境变量">
<div class="titlepage"><div><div><h2 class="title">
<a name="config-env"></a>第 2 章 配置环境变量</h2></div></div></div>
<p>
		应用程序通过环境变量XMODIFIERS与<acronym class="acronym">XIM</acronym>沟通，
		设置XMODIFIERS的方法如下（以<span class="command"><strong>bash</strong></span>为例）：
	</p>
<pre class="synopsis">export XMODIFIERS="@im=<em class="replaceable"><code>XIM注册名</code></em>"</pre>
<p></p>
<p>
		上面的<em class="replaceable"><code>XIM注册名</code></em>为<acronym class="acronym">XIM</acronym>
		程序在系统注册的名字。应用程序启动时会根据该变量查找相应的XIM服务器。
		因此，即便系统中同时运行了若干个<acronym class="acronym">XIM</acronym>程序，
		一个应用程序在某个时刻也只能使用一个<acronym class="acronym">XIM</acronym>输入法。
		有时候您会遇到这种情况，明明<acronym class="acronym">XIM</acronym>已经启动了，
		但应用程序就是无法使用。
		这往往是因为XMODIFIERS设置不正确(如您配置系统时在不同的脚本文件中修改了XMODIFIERS，
		从而导致X启动时与启动完成后该变量不一致)所致。
		fcitx缺省注册的<acronym class="acronym">XIM</acronym>名为fcitx，
		但如果fcitx启动时XMODIFIERS已经设置好，
		fcitx会自动以系统的设置来注册合适的名字。
	</p>
<p>
		另外，<acronym class="acronym">XIM</acronym>还依赖于系统locale的设置，
		如果<acronym class="acronym">XIM</acronym>启动的locale与应用程序启动时的locale不一致，
		也可能无法使用。
		需要注意的是，locale设置为en_US将无法输入中文。
		如果您想使用英文环境，请使用en_US.UTF-8。
		为了设置XMODIFERS，一般可以在~/.bashrc增加行：
		</p>
<pre class="programlisting">export XMODIFIERS="@im=fcitx"</pre>
<p>
	</p>
<p>
		重新登录当前用户，启动X，然后在X下手工运行fcitx(在某些环境中，
		可能只能为fcitx开始运行之后启动的程序输入中文)。
		您也可以将fcitx加到窗口管理器的自动启动中，具体方法请参考相应窗口管理器的说明。
	</p>
<p>
		</p>
<p>Ubuntu 下的配置</p>
<p>
		</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><p>安装 im-switch软件包。</p></li>
<li class="listitem">
<p>进入/etc/X11/xinit/xinput.d目录，新建fcitx文件，文件内容为：</p>
<div class="programlistingco">
<pre class="programlisting">XIM=fcitx
XIM_PROGRAM=/usr/local/bin/fcitx
XIM_ARGS=""
GTK_IM_MODULE=XIM
QT_IM_MODULE=XIM
DEPENDS="fcitx"</pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr>
<td width="5%" valign="top" align="left"><p><img src="images/callouts/1.png" alt="1" border="0"></p></td>
<td valign="top" align="left"><p>
								/usr/local/bin/fcitx 根据 fcitx 的安装路径来填。
							</p></td>
</tr></table></div>
</div>
</li>
<li class="listitem"><p>把系统的 locale 设为 zh_CN.UTF-8，执行im-switch -s fcitx</p></li>
</ol></div>
<p>
	</p>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="package.html">上一页</a> </td>
<td width="20%" align="center"><a accesskey="u" href="installation.html">上一级</a></td>
<td width="40%" align="right"> <a accesskey="n" href="autostart.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">1.2. 从预编译包安装 </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top"> 第 3 章 跟随桌面环境自动启动</td>
</tr>
</table>
</div>
</body>
</html>
